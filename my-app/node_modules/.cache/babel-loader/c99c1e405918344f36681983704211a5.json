{"ast":null,"code":"import _objectSpread from\"/Users/Tomi_SS/Documents/acamica-frontend/proyecto04/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/Tomi_SS/Documents/acamica-frontend/proyecto04/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./item.css';import{Link,Redirect,Route}from'react-router-dom';import{useContext,useEffect,useState}from\"react\";import ProductCard from'../productos/ProductCard';import React from'react';import coin from\"../images/icons/coin.svg\";import{coinContext}from'../contexts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Item(_ref){var productItem=_ref.productItem,copiaProducts=_ref.copiaProducts;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),home=_useState2[0],setHome=_useState2[1];var _useContext=useContext(coinContext),coins=_useContext.coins,setCoins=_useContext.setCoins;var handleRedeem=function handleRedeem(productId,cost){console.log(productId,cost);//llamar a la api y pasarle el productId\n//     const postCost = async () => {\n//         const response = await fetch(\"https://coding-challenge-api.aerolab.co/redeem\",{\n//         method: \"POST\",   \n//         headers: {\n//                      \"Content-Type\": \"application/json\",\n//                      \"Accept\" : \"application/json\",\n//                      \"Authorization\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGIwNTI3MjliNzc4MTAwMjA5YzVhYWIiLCJpYXQiOjE2MjIxNjgxNzh9.rvgBvfaLqxHZv-gU_GUyFz4c6hIybWT9rihd6MFTnno\",\n//                  },\n//                  body: JSON.stringify({\n//                     \"productId\": productId\n//                  })\n//              })\n//              response.json(); \n//   }\nfetch(\"https://coding-challenge-api.aerolab.co/redeem\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Accept\":\"application/json\",\"Authorization\":\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGIwNTI3MjliNzc4MTAwMjA5YzVhYWIiLCJpYXQiOjE2MjIxNjgxNzh9.rvgBvfaLqxHZv-gU_GUyFz4c6hIybWT9rihd6MFTnno\"},body:JSON.stringify({\"productId\":productId})}).then(function(response){//si entro aca, significa que se completo la peticion correctamente\n// si nos reponde con 200 entonces restamos el costo a las monedas.\nsetCoins(coins-cost);alert(\"Exito al comprar\");setHome(true);});// ).catch(error=>{\n//     //Ocurrio un error        \n// })\n};return/*#__PURE__*/_jsx(_Fragment,{children:!productItem||home?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsxs(\"section\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-container\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"picture\",src:productItem.img.hdUrl,alt:productItem.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-container\",children:[/*#__PURE__*/_jsx(\"h4\",{children:productItem.category}),/*#__PURE__*/_jsx(\"h2\",{children:productItem.name}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Valor: \",/*#__PURE__*/_jsx(\"img\",{src:coin,alt:\"coin\"}),/*#__PURE__*/_jsx(\"span\",{children:productItem.cost})]}),/*#__PURE__*/_jsx(\"div\",{children:coins>=productItem.cost?/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return handleRedeem(productItem._id,productItem.cost);},children:[\"Canjear\",/*#__PURE__*/_jsx(\"img\",{src:\"\",alt:\"Buy\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Te faltan puntos\"}),/*#__PURE__*/_jsx(Link,{to:\"/mas-creditos\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Haciendo click aqu\\xED, podr\\xE1s conseguir m\\xE1s\"})})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"similar-container\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"similar-title\",children:\"Otros productos similares\"}),/*#__PURE__*/_jsx(\"div\",{className:\"product-container\",children:copiaProducts.filter(function(product){return product.category===productItem.category;}).map(function(product){return/*#__PURE__*/_jsx(Link,{to:\"\".concat(product._id),style:{textDecoration:'none'},children:/*#__PURE__*/_jsx(ProductCard,_objectSpread({product:product},product))});})}),/*#__PURE__*/_jsx(\"div\",{className:\"back-home\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-home-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",style:{textDecoration:'none',color:'black'},children:\"Mir\\xE1 los otros premios que tenemos para vos\"})})})]})]})});}export default Item;","map":{"version":3,"sources":["/Users/Tomi_SS/Documents/acamica-frontend/proyecto04/my-app/src/item/item.jsx"],"names":["Link","Redirect","Route","useContext","useEffect","useState","ProductCard","React","coinContext","Item","productItem","copiaProducts","home","setHome","coins","setCoins","handleRedeem","productId","cost","console","log","fetch","method","headers","body","JSON","stringify","then","response","alert","img","hdUrl","name","category","coin","_id","filter","product","map","textDecoration","color"],"mappings":"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","sourcesContent":["import './item.css';\n\nimport { Link, Redirect, Route } from 'react-router-dom';\nimport { useContext, useEffect, useState } from \"react\";\n\nimport ProductCard from '../productos/ProductCard'\nimport React from 'react'\nimport coin from '../images/icons/coin.svg'\nimport { coinContext } from '../contexts';\n\nfunction Item({ productItem,copiaProducts,}){\n    const [home, setHome] = useState(false)    \n    const {coins, setCoins} = useContext(coinContext)\n    const handleRedeem = (productId, cost)=>{\n        console.log(productId, cost);\n        //llamar a la api y pasarle el productId\n    //     const postCost = async () => {\n    //         const response = await fetch(\"https://coding-challenge-api.aerolab.co/redeem\",{\n    //         method: \"POST\",   \n    //         headers: {\n    //                      \"Content-Type\": \"application/json\",\n    //                      \"Accept\" : \"application/json\",\n    //                      \"Authorization\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGIwNTI3MjliNzc4MTAwMjA5YzVhYWIiLCJpYXQiOjE2MjIxNjgxNzh9.rvgBvfaLqxHZv-gU_GUyFz4c6hIybWT9rihd6MFTnno\",\n    //                  },\n    //                  body: JSON.stringify({\n    //                     \"productId\": productId\n    //                  })\n    //              })\n    //              response.json(); \n    //   }\n        fetch(\"https://coding-challenge-api.aerolab.co/redeem\",\n            {\n                method: \"POST\",   \n                headers: {\n                            \"Content-Type\": \"application/json\",\n                            \"Accept\" : \"application/json\",\n                            \"Authorization\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGIwNTI3MjliNzc4MTAwMjA5YzVhYWIiLCJpYXQiOjE2MjIxNjgxNzh9.rvgBvfaLqxHZv-gU_GUyFz4c6hIybWT9rihd6MFTnno\",\n                        },\n                        body: JSON.stringify({\n                            \"productId\": productId\n                        })\n            }\n        ).then(response=>{ //si entro aca, significa que se completo la peticion correctamente\n            // si nos reponde con 200 entonces restamos el costo a las monedas.\n            setCoins(coins - cost);\n            alert(\"Exito al comprar\"); \n            setHome(true);   \n        })\n        // ).catch(error=>{\n        //     //Ocurrio un error        \n        // })\n    }\n    return(\n        <>\n        {!productItem || home ?<Redirect to='/'></Redirect>\n        :\n            <section className=\"item\">\n                <div className=\"item-container\">\n                    <img className=\"picture\" src={productItem.img.hdUrl} alt={productItem.name}/>\n                    <div className=\"info-container\">\n                        <h4>{productItem.category}</h4>\n                        <h2>{productItem.name}</h2>\n                        <h5>Valor: <img src={coin} alt=\"coin\"/><span>{productItem.cost}</span></h5>\n                        <div> \n                            { coins >= productItem.cost ? (\n                                <button onClick={()=>handleRedeem(productItem._id, productItem.cost)}>Canjear\n                                <img src=\"\" alt=\"Buy\"/>\n                                </button>\n                            ) : (\n                                <>\n\n                                    <h4>Te faltan puntos</h4>\n                                    <Link to=\"/mas-creditos\">\n                                    <p>Haciendo click aquí, podrás conseguir más</p>\n                                    </Link>\n\n                               </>\n                            )\n\n                            }                       \n                            \n                        </div>\n                    </div>\n                </div>\n                <div className=\"similar-container\" >\n                    <h5 className=\"similar-title\">Otros productos similares</h5> \n                    <div className=\"product-container\">\n                    {copiaProducts.filter((product) =>\n                        product.category === productItem.category\n                    ).map((product) =>\n                        <Link to ={`${product._id}`} style={{ textDecoration: 'none' }}>\n                            <ProductCard \n                            product={product}\n                            {...product}/>\n                        </Link>\n                    )}\n                    </div> \n                    <div className=\"back-home\">\n                        <button className=\"btn-home-item\">\n                            <Link to=\"/\" style={{ textDecoration: 'none', color:'black' }}>Mirá los otros premios que tenemos para vos</Link>\n                        </button>\n                </div>\n                </div>\n\n                \n            </section>\n        }\n        </>\n    );\n}\n\nexport default Item;"]},"metadata":{},"sourceType":"module"}